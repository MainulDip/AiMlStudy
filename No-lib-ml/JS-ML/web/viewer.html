<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Data Viewer</h1>
    <div id="inputContainer"></div>
    <div id="chartContainer"></div>
    <div id="controlPanel">
        <button onClick="toggleInput()">
           Toggle Input
        </button>
     </div>
    <div id="container"></div>
    
    <!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> -->
    <script src="../common/js_objects/features.js"></script>

    <script src="../common/constants.js"></script>
    <script src="../common/utils.js"></script>
    <script src="../common/draw.js"></script>
    <script src="../common/featureFunctions.js"></script>

    <script src="js/display.js"></script>
    <script src="js/sketchPad.js"></script>
    <!-- Custom Chart instead of google chart   -->
    <script src="./chart/chart.js"></script>
    <script src="./chart/graphics.js"></script>
    <script src="./chart/math.js"></script>

    <script>
        const {samples, featureNames} = features

        // id: 1, label: "car", student_id: 1663053145814, student_name: "Radu"
        const groups = utils.groupBy(samples, "student_id") // inside utils.js

        // "for in" if applied in object (also on list/array), returns keys, for (let key in arr/obj)
        // for(let value of groups) will not work, as "for of" only works with array/iterable
        for (let student_id in groups) {
            const samples = groups[student_id] // get the value (value is array here) by student_id key
            const studentName = samples[0].student_name // get the first element's student_name props, though all (8 array items) are same, as we arranged them that way
            
            // create the table UI on the given container
            createRow(container, studentName, samples) // comes form js/display.js
            // console.log(student_id)
        }

        // google chart setup
        const options = {
            size: 500,
            axesLabels: featureNames,
            styles: utils.styles,
            transparency: 0.7,
            icon: "image"
        }

        // generate image instead of emojis to feed the custom chart
        graphics.generateImages(utils.styles);

        const chart = new Chart(chartContainer, samples, options, handleClick) // handleClick is declared inside display.js

        // input sketchpad
        const sketchPad = new SketchPad(inputContainer, onDrawingUpdate)
        sketchPad.canvas.style.cssText += "outline: 1000px solid rgba(0,0,0,7)"

        function onDrawingUpdate(paths){
            const point = [
            featureFunctions.getPathCount(paths),
            featureFunctions.getPointCount(paths)
            ]
            console.log(point)
        }

    </script>
</body>
</html>